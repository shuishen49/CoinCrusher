# InitialCoinVolume 脚本使用指南

## 概述
`InitialCoinVolume.ts` 是一个专门用于在游戏开始时，在指定的立方体体积内生成初始金币的脚本。它与 `CoinGenerator.ts` 分工明确：
- **InitialCoinVolume**: 负责游戏开始时的初始金币生成
- **CoinGenerator**: 负责玩家游戏过程中的金币生成

## 设置步骤

### 第1步：创建立方体生成区
1. 在场景层级管理器中，右键点击场景根节点
2. 选择 `创建 -> 3D对象 -> 立方体(Cube)`
3. 将新创建的立方体重命名为 `InitialCoinVolume`
4. 调整立方体的位置、旋转和大小，使其覆盖您希望生成金币的区域

### 第2步：添加必要的组件
1. 选中刚创建的立方体节点
2. 在 Inspector 面板中，点击 `添加组件`
3. 添加 `BoxCollider3D` 组件（如果还没有的话）
4. 调整 BoxCollider 的 `Size` 属性，使其与立方体的实际大小匹配

### 第3步：挂载脚本
1. 在 Inspector 面板中，点击 `添加组件`
2. 选择 `InitialCoinVolume` 脚本
3. 脚本会自动添加到节点上

### 第4步：配置脚本属性
在 Inspector 面板中，您会看到以下属性需要配置：

#### Coin Prefabs (金币预制体数组)
- **作用**: 定义可以生成的金币类型
- **设置方法**: 
  1. 点击数组大小输入框，设置数组长度（例如：3）
  2. 将您的金币预制体从资源管理器拖拽到对应的槽位中
  3. 建议包含不同面值的金币（1金币、10金币、100金币等）

#### Coin Container (金币容器)
- **作用**: 所有生成的金币都将放在这个节点下，保持场景整洁
- **设置方法**: 将场景中用于存放金币的节点拖拽到这里
- **建议**: 使用一个名为 `CoinContainer` 或 `Coins` 的空节点

#### Coin Count (金币数量)
- **作用**: 在游戏开始时生成的金币总数
- **建议值**: 100-200个，根据您的游戏需求调整

### 第5步：隐藏立方体（可选）
如果您不希望玩家看到这个白色的立方体：
1. 在 Inspector 面板中找到 `MeshRenderer` 组件
2. 取消勾选该组件，立方体将变为不可见
3. BoxCollider 仍然有效，脚本可以正常工作

### 第6步：修改现有脚本
为了避免重复生成金币，需要修改 `CoinGenerator.ts`：
1. 找到场景中的 `CoinSpawnPoint` 节点
2. 在 Inspector 面板中找到 `CoinGenerator` 组件
3. 将 `Initial Coin Count` 属性设置为 `0`

## 工作原理

### 生成逻辑
1. 脚本在 `start()` 生命周期中执行
2. 读取立方体节点的 BoxCollider 尺寸和位置
3. 在立方体体积内随机生成指定数量的金币
4. 每个金币都有随机的：
   - 位置（在立方体边界内）
   - 旋转角度
   - 金币类型（从预制体数组中随机选择）

### 物理属性
- 生成的金币会自动启用物理属性
- 金币会受重力影响，自然下落和堆叠
- 形成逼真的初始金币堆

## 调试和故障排除

### 常见问题

#### 1. 控制台显示 "BoxCollider 未找到" 错误
**解决方案**: 确保立方体节点上有 BoxCollider3D 组件

#### 2. 金币没有生成
**检查项目**:
- Coin Prefabs 数组是否已设置
- Coin Container 是否已指定
- 立方体的 BoxCollider 尺寸是否正确

#### 3. 金币生成在错误的位置
**解决方案**: 检查立方体的位置和 BoxCollider 的 Center 属性

### 调试信息
脚本会在控制台输出详细的生成信息：
```
[InitialCoinVolume] 开始在指定的立方体区域内生成 100 个金币...
[InitialCoinVolume] 成功生成了 100 个金币。
```

## 性能优化建议

1. **合理设置金币数量**: 建议不超过200个，避免性能问题
2. **使用对象池**: 对于大量金币，考虑实现对象池机制
3. **LOD系统**: 对于远处的金币，可以使用简化的模型

## 扩展功能

### 自定义生成模式
您可以修改脚本以实现不同的生成模式：
- 分层生成（不同高度生成不同面值的金币）
- 螺旋生成（按螺旋路径生成金币）
- 随机分布（更自然的随机分布）

### 动态调整
脚本支持在运行时动态调整生成参数，您可以根据游戏进度调整金币数量或生成区域。

## 注意事项

1. **脚本执行顺序**: 确保 InitialCoinVolume 在 CoinGenerator 之前执行
2. **物理设置**: 确保场景中启用了物理系统
3. **内存管理**: 生成完成后脚本会自动禁用，节省资源
4. **场景切换**: 如果需要在场景切换时重新生成，可以重新启用脚本

---

通过以上设置，您就可以在游戏开始时在指定的立方体区域内生成自然的初始金币堆了！
